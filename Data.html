<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <script type="text/javascript" src='d3.js'>

    </script>
  </head>
  <body>
    <svg>

    </svg>
  </body>
  <script type="text/javascript">
    var gradesP = d3.json('gradeData.json').then(function(data){
      draw(data,screenWidth,screenHeight)
    });

    var draw =function(data,screenWidth,screenHeight){

      var svg = d3.select('svg')
                  .attr('width',screenWidth)
                  .attr('height',screenHeight);

      var margins =
      {
        top:20,
        bottom:20,
        left:20,
        right:20
      }

      var width = screenWidth -margins.left - margins.right;
      var height = screenHeight -margins.top - margins.bottom;

      var xScale = d3.scaleLinear()
                     .domain([0,20])
                     .range([0,width]);

      var yScale = d3.scaleLinear()
                     .domain([0,100])
                     .range([height,0]);

      var colors = d3.scaleOrdinal(d3.schemeAccent);

      var plot = svg.append('g').classed('plot',true)
                    .attr('transform','translate('+margins.left+","+margins.top+")");

      var students = plot.selectAll('g')
                         .data(data)
                         .enter()
                         .append('g')
                         .attr('fill', function(d){
                           return colors(d.name)
                         });
      students.selectAll('circle')
              .data(function(d){return d.grades})
              .enter()
              .append('circle')
              .attr('cx', function(d,i){return xScale(i)})
              .attr('cy',function(d){return yScale(d)})
              .attr('r',7)

      var legend = svg.append('legend')
                      .classed('legend', true)
                      .attr('transform', 'translate('+(width+margins.left)+','+margins.top+')');

      var legendLines = legend.selectAll('g')
                              .data(data)
                              .enter()
                              .append('g')
                              .classed('legendLine',true)
                              .attr('transform',function(d,i){return 'translate(0,'+ (i + 20)+')'})

      legendLines.append('rect')
                 .attr('x',0)
                 .attr('y',0)
                 .attr("width",10)
                 .attr('height'10)
                 .attr("fill",function(d){return colors(d.name)});

      legendLines.append('text')
                 .attr('x',20)
                 .attr('y',10)
                 .text(function(d){return d.name});



    }


  </script>
</html>
